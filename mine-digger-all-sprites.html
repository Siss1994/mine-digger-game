<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mine Digger - ì „ì²´ ê²Œì„ ìŠ¤í”„ë¼ì´íŠ¸</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
            font-family: 'Courier New', monospace;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        h1 {
            color: #ffd700;
            text-align: center;
            font-size: 28px;
        }
        h2 {
            color: #00ff00;
            border-bottom: 2px solid #00ff00;
            padding-bottom: 5px;
            margin-top: 40px;
        }

        .section {
            margin: 30px 0;
            padding: 20px;
            background: #2a2a2a;
            border-radius: 8px;
        }

        .sprite-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .sprite-item {
            background: #333;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            border: 2px solid #555;
        }

        .sprite-item:hover {
            border-color: #ffd700;
            transform: scale(1.05);
            transition: all 0.2s;
        }

        canvas {
            background: #000;
            border: 2px solid #666;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
            display: block;
            margin: 0 auto;
        }

        .label {
            margin-top: 8px;
            font-size: 11px;
            color: #aaa;
        }

        .desc {
            margin-top: 4px;
            font-size: 9px;
            color: #666;
        }

        button {
            background: #ffd700;
            color: #000;
            border: none;
            padding: 12px 24px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            margin: 10px 5px;
        }

        button:hover {
            background: #ffed4e;
        }

        #download-section {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #2a2a2a;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #ffd700;
            z-index: 1000;
        }

        .summary {
            background: #1a3a1a;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 2px solid #00ff00;
        }

        .summary h3 {
            color: #00ff00;
            margin-top: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>â›ï¸ Mine Digger - ì™„ì „í•œ ê²Œì„ ìŠ¤í”„ë¼ì´íŠ¸ ì»¬ë ‰ì…˜</h1>

        <div class="summary">
            <h3>ğŸ“Š ìŠ¤í”„ë¼ì´íŠ¸ ìš”ì•½</h3>
            <p>âœ… ìºë¦­í„° ì• ë‹ˆë©”ì´ì…˜: 2ì¢… (IDLE, MINING)</p>
            <p>âœ… ê´‘ë¬¼: 32ì¢… (Tier 1~7)</p>
            <p>âœ… ê³¡ê´­ì´: 8ì¢…</p>
            <p>âœ… ë°°ê²½: ì§‘, ë§ˆì„, ê´‘ì‚° 7ì¢…</p>
            <p>âœ… ê±´ë¬¼: 4ì¢… (ì§‘, ìƒì , ëŒ€ì¥ê°„, ê´‘ì‚°ì…êµ¬)</p>
            <p>âœ… NPC: 2ì¢…</p>
            <p>âœ… UI: HPë°”, ë°ë¯¸ì§€ ìˆ«ì, ë²„íŠ¼ ë“±</p>
            <p>âœ… ì´í™íŠ¸: íƒ€ê²©, íŒŒí‹°í´ ë“±</p>
        </div>

        <!-- ìºë¦­í„° -->
        <div class="section">
            <h2>ğŸ‘· ìºë¦­í„° ì• ë‹ˆë©”ì´ì…˜</h2>
            <div class="sprite-grid">
                <div class="sprite-item">
                    <div class="label">IDLE (ëŒ€ê¸°)</div>
                    <canvas id="char-idle" width="96" height="32"></canvas>
                    <div class="desc">3í”„ë ˆì„</div>
                </div>
                <div class="sprite-item">
                    <div class="label">MINING (ì±„êµ´)</div>
                    <canvas id="char-mining" width="128" height="32"></canvas>
                    <div class="desc">4í”„ë ˆì„</div>
                </div>
            </div>
        </div>

        <!-- ê´‘ë¬¼ -->
        <div class="section">
            <h2>ğŸ’ ê´‘ë¬¼ (í‹°ì–´ë³„ ìƒ˜í”Œ)</h2>
            <div class="sprite-grid" id="minerals"></div>
        </div>

        <!-- ê³¡ê´­ì´ -->
        <div class="section">
            <h2>â›ï¸ ê³¡ê´­ì´ ì•„ì´í…œ</h2>
            <div class="sprite-grid" id="pickaxes"></div>
        </div>

        <!-- ê±´ë¬¼ -->
        <div class="section">
            <h2>ğŸ˜ï¸ ê±´ë¬¼ ì˜¤ë¸Œì íŠ¸</h2>
            <div class="sprite-grid" id="buildings"></div>
        </div>

        <!-- NPC -->
        <div class="section">
            <h2>ğŸ‘¥ NPC ìºë¦­í„°</h2>
            <div class="sprite-grid" id="npcs"></div>
        </div>

        <!-- ë°°ê²½ -->
        <div class="section">
            <h2>ğŸŒ„ ë°°ê²½ íƒ€ì¼ (ì”¬ë³„)</h2>
            <div class="sprite-grid" id="backgrounds"></div>
        </div>

        <!-- ê´‘ì‚° ë°°ê²½ -->
        <div class="section">
            <h2>â›°ï¸ ê´‘ì‚° ë°°ê²½ (ë ˆë²¨ë³„)</h2>
            <div class="sprite-grid" id="mine-backgrounds"></div>
        </div>

        <!-- UI ìš”ì†Œ -->
        <div class="section">
            <h2>ğŸ® UI ì»´í¬ë„ŒíŠ¸</h2>
            <div class="sprite-grid" id="ui"></div>
        </div>

        <!-- ì´í™íŠ¸ -->
        <div class="section">
            <h2>âœ¨ ì´í™íŠ¸</h2>
            <div class="sprite-grid" id="effects"></div>
        </div>
    </div>

    <div id="download-section">
        <button onclick="downloadAllSprites()">ğŸ“¥ ì „ì²´ ìŠ¤í”„ë¼ì´íŠ¸ ë‹¤ìš´ë¡œë“œ</button>
    </div>

    <script>
        // ============ ìºë¦­í„° ì• ë‹ˆë©”ì´ì…˜ ============
        function drawCharacterIdle(canvas) {
            const ctx = canvas.getContext('2d');
            ctx.imageSmoothingEnabled = false;

            const frames = [
                () => {
                    ctx.fillStyle = '#ffd700'; ctx.fillRect(12, 4, 8, 4);
                    ctx.fillStyle = '#ffdbac'; ctx.fillRect(12, 8, 8, 6);
                    ctx.fillStyle = '#4169e1'; ctx.fillRect(10, 14, 12, 10);
                    ctx.fillStyle = '#ffdbac'; ctx.fillRect(8, 16, 2, 6); ctx.fillRect(22, 16, 2, 6);
                    ctx.fillStyle = '#2f4f4f'; ctx.fillRect(12, 24, 3, 6); ctx.fillRect(17, 24, 3, 6);
                },
                () => {
                    ctx.fillStyle = '#ffd700'; ctx.fillRect(12, 5, 8, 4);
                    ctx.fillStyle = '#ffdbac'; ctx.fillRect(12, 9, 8, 6);
                    ctx.fillStyle = '#4169e1'; ctx.fillRect(10, 15, 12, 10);
                    ctx.fillStyle = '#ffdbac'; ctx.fillRect(8, 17, 2, 6); ctx.fillRect(22, 17, 2, 6);
                    ctx.fillStyle = '#2f4f4f'; ctx.fillRect(12, 25, 3, 6); ctx.fillRect(17, 25, 3, 6);
                },
                () => {
                    ctx.fillStyle = '#ffd700'; ctx.fillRect(12, 4, 8, 4);
                    ctx.fillStyle = '#ffdbac'; ctx.fillRect(12, 8, 8, 6);
                    ctx.fillStyle = '#4169e1'; ctx.fillRect(10, 14, 12, 10);
                    ctx.fillStyle = '#ffdbac'; ctx.fillRect(8, 16, 2, 6); ctx.fillRect(22, 16, 2, 6);
                    ctx.fillStyle = '#2f4f4f'; ctx.fillRect(12, 24, 3, 6); ctx.fillRect(17, 24, 3, 6);
                }
            ];

            frames.forEach((f, i) => { ctx.save(); ctx.translate(i * 32, 0); f(); ctx.restore(); });
        }

        function drawCharacterMining(canvas) {
            const ctx = canvas.getContext('2d');
            ctx.imageSmoothingEnabled = false;

            const frames = [
                () => {
                    ctx.fillStyle = '#ffd700'; ctx.fillRect(12, 4, 8, 4);
                    ctx.fillStyle = '#ffdbac'; ctx.fillRect(12, 8, 8, 6);
                    ctx.fillStyle = '#4169e1'; ctx.fillRect(10, 14, 12, 10);
                    ctx.fillStyle = '#ffdbac'; ctx.fillRect(8, 16, 2, 6); ctx.fillRect(20, 12, 2, 8);
                    ctx.fillStyle = '#2f4f4f'; ctx.fillRect(12, 24, 3, 6); ctx.fillRect(17, 24, 3, 6);
                    ctx.fillStyle = '#8b4513'; ctx.fillRect(22, 8, 2, 8);
                    ctx.fillStyle = '#696969'; ctx.fillRect(20, 6, 3, 2);
                },
                () => {
                    ctx.fillStyle = '#ffd700'; ctx.fillRect(12, 4, 8, 4);
                    ctx.fillStyle = '#ffdbac'; ctx.fillRect(12, 8, 8, 6);
                    ctx.fillStyle = '#4169e1'; ctx.fillRect(10, 14, 12, 10);
                    ctx.fillStyle = '#ffdbac'; ctx.fillRect(8, 16, 2, 6); ctx.fillRect(20, 14, 2, 8);
                    ctx.fillStyle = '#2f4f4f'; ctx.fillRect(12, 24, 3, 6); ctx.fillRect(17, 24, 3, 6);
                    ctx.fillStyle = '#8b4513'; ctx.fillRect(22, 14, 2, 8);
                    ctx.fillStyle = '#696969'; ctx.fillRect(22, 12, 3, 2);
                },
                () => {
                    ctx.fillStyle = '#ffd700'; ctx.fillRect(12, 4, 8, 4);
                    ctx.fillStyle = '#ffdbac'; ctx.fillRect(12, 8, 8, 6);
                    ctx.fillStyle = '#4169e1'; ctx.fillRect(10, 14, 12, 10);
                    ctx.fillStyle = '#ffdbac'; ctx.fillRect(8, 16, 2, 6); ctx.fillRect(20, 18, 2, 6);
                    ctx.fillStyle = '#2f4f4f'; ctx.fillRect(12, 24, 3, 6); ctx.fillRect(17, 24, 3, 6);
                    ctx.fillStyle = '#8b4513'; ctx.fillRect(22, 22, 2, 6);
                    ctx.fillStyle = '#696969'; ctx.fillRect(24, 26, 3, 2);
                    ctx.fillStyle = '#ffff00'; ctx.fillRect(26, 28, 2, 2); ctx.fillRect(24, 27, 2, 2);
                },
                () => {
                    ctx.fillStyle = '#ffd700'; ctx.fillRect(12, 4, 8, 4);
                    ctx.fillStyle = '#ffdbac'; ctx.fillRect(12, 8, 8, 6);
                    ctx.fillStyle = '#4169e1'; ctx.fillRect(10, 14, 12, 10);
                    ctx.fillStyle = '#ffdbac'; ctx.fillRect(8, 16, 2, 6); ctx.fillRect(20, 16, 2, 6);
                    ctx.fillStyle = '#2f4f4f'; ctx.fillRect(12, 24, 3, 6); ctx.fillRect(17, 24, 3, 6);
                    ctx.fillStyle = '#8b4513'; ctx.fillRect(22, 18, 2, 6);
                    ctx.fillStyle = '#696969'; ctx.fillRect(24, 22, 3, 2);
                }
            ];

            frames.forEach((f, i) => { ctx.save(); ctx.translate(i * 32, 0); f(); ctx.restore(); });
        }

        // ============ ê´‘ë¬¼ ============
        const minerals = [
            { name: 'ì„íƒ„', color: '#2a2a2a', shine: '#444', tier: 1 },
            { name: 'ì² ê´‘ì„', color: '#7a7a7a', shine: '#999', tier: 2 },
            { name: 'êµ¬ë¦¬', color: '#d87034', shine: '#ff8c42', tier: 3 },
            { name: 'ì€', color: '#c0c0c0', shine: '#e8e8e8', tier: 4 },
            { name: 'ê¸ˆ', color: '#ffd700', shine: '#ffed4e', tier: 5 },
            { name: 'ë‹¤ì´ì•„ëª¬ë“œ', color: '#b9f2ff', shine: '#e0ffff', tier: 6 },
            { name: 'ìš´ì„', color: '#1a1a1a', shine: '#ffd700', tier: 7 }
        ];

        function drawMineral(canvas, color, shine) {
            const ctx = canvas.getContext('2d');
            ctx.imageSmoothingEnabled = false;

            const pattern = [
                [0,0,0,0,1,1,1,1,0,0,0,0],
                [0,0,1,1,2,2,2,2,1,1,0,0],
                [0,1,2,2,2,2,2,2,2,2,1,0],
                [1,2,2,2,3,3,2,2,2,2,2,1],
                [1,2,2,3,3,3,3,2,2,2,2,1],
                [1,2,2,2,3,3,2,2,2,2,2,1],
                [1,2,2,2,2,2,2,2,2,2,2,1],
                [0,1,2,2,2,2,2,2,2,2,1,0],
                [0,0,1,1,2,2,2,2,1,1,0,0],
                [0,0,0,0,1,1,1,1,0,0,0,0]
            ];

            const colors = ['transparent', '#000', color, shine];
            pattern.forEach((row, y) => {
                row.forEach((val, x) => {
                    if (val > 0) {
                        ctx.fillStyle = colors[val];
                        ctx.fillRect(10 + x * 3, 11 + y * 3, 3, 3);
                    }
                });
            });
        }

        function createMinerals() {
            const container = document.getElementById('minerals');
            minerals.forEach(m => {
                const div = document.createElement('div');
                div.className = 'sprite-item';
                div.innerHTML = `
                    <div class="label">${m.name}</div>
                    <canvas id="mineral-${m.name}" width="32" height="32"></canvas>
                    <div class="desc">Tier ${m.tier}</div>
                `;
                container.appendChild(div);
                drawMineral(document.getElementById(`mineral-${m.name}`), m.color, m.shine);
            });
        }

        // ============ ê³¡ê´­ì´ ============
        const pickaxes = [
            { name: 'ë‚˜ë¬´', handle: '#8b4513', head: '#a0522d' },
            { name: 'ëŒ', handle: '#8b4513', head: '#808080' },
            { name: 'ì² ', handle: '#8b4513', head: '#c0c0c0' },
            { name: 'ê°•ì² ', handle: '#654321', head: '#d3d3d3' },
            { name: 'ê¸ˆ', handle: '#8b4513', head: '#ffd700' },
            { name: 'ë‹¤ì´ì•„', handle: '#4a4a4a', head: '#b9f2ff' },
            { name: 'ë¯¸ìŠ¤ë¦´', handle: '#4a4a4a', head: '#87ceeb' },
            { name: 'ì „ì„¤', handle: '#2a2a2a', head: '#ff00ff' }
        ];

        function drawPickaxe(canvas, handleColor, headColor, legendary = false) {
            const ctx = canvas.getContext('2d');
            ctx.imageSmoothingEnabled = false;
            ctx.fillStyle = handleColor; ctx.fillRect(14, 18, 4, 12);
            ctx.fillStyle = headColor;
            ctx.fillRect(6, 8, 20, 6);
            ctx.fillRect(8, 10, 2, 4); ctx.fillRect(22, 10, 2, 4);
            ctx.fillRect(4, 10, 2, 2); ctx.fillRect(26, 10, 2, 2);
            if (legendary) {
                ctx.fillStyle = '#ffff00';
                ctx.fillRect(8, 6, 2, 2); ctx.fillRect(22, 6, 2, 2); ctx.fillRect(15, 7, 2, 2);
            }
        }

        function createPickaxes() {
            const container = document.getElementById('pickaxes');
            pickaxes.forEach((p, i) => {
                const div = document.createElement('div');
                div.className = 'sprite-item';
                div.innerHTML = `
                    <div class="label">${p.name} ê³¡ê´­ì´</div>
                    <canvas id="pick-${i}" width="32" height="32"></canvas>
                `;
                container.appendChild(div);
                drawPickaxe(document.getElementById(`pick-${i}`), p.handle, p.head, i >= 6);
            });
        }

        // ============ ê±´ë¬¼ ============
        const buildings = [
            { name: 'ì§‘', size: 64, draw: drawHouse },
            { name: 'ìƒì ', size: 64, draw: drawShop },
            { name: 'ëŒ€ì¥ê°„', size: 64, draw: drawSmithy },
            { name: 'ê´‘ì‚°ì…êµ¬', size: 64, draw: drawMineEntrance }
        ];

        function drawHouse(ctx) {
            // ì§€ë¶•
            ctx.fillStyle = '#8b4513';
            for (let i = 0; i < 16; i++) {
                ctx.fillRect(16 - i, 8 + i, i * 2, 2);
            }
            // ë²½
            ctx.fillStyle = '#d2691e';
            ctx.fillRect(16, 24, 32, 32);
            // ë¬¸
            ctx.fillStyle = '#654321';
            ctx.fillRect(26, 40, 12, 16);
            // ì°½ë¬¸
            ctx.fillStyle = '#87ceeb';
            ctx.fillRect(20, 30, 8, 8);
            ctx.fillRect(36, 30, 8, 8);
        }

        function drawShop(ctx) {
            // ì§€ë¶•
            ctx.fillStyle = '#dc143c';
            for (let i = 0; i < 16; i++) {
                ctx.fillRect(16 - i, 8 + i, i * 2, 2);
            }
            // ë²½
            ctx.fillStyle = '#f5deb3';
            ctx.fillRect(16, 24, 32, 32);
            // ê°„íŒ
            ctx.fillStyle = '#ffd700';
            ctx.fillRect(20, 18, 24, 8);
            ctx.fillStyle = '#000';
            ctx.font = '8px monospace';
            ctx.fillText('SHOP', 26, 24);
            // ë¬¸
            ctx.fillStyle = '#654321';
            ctx.fillRect(26, 40, 12, 16);
        }

        function drawSmithy(ctx) {
            // ì§€ë¶•
            ctx.fillStyle = '#696969';
            for (let i = 0; i < 16; i++) {
                ctx.fillRect(16 - i, 8 + i, i * 2, 2);
            }
            // ë²½
            ctx.fillStyle = '#8b8b8b';
            ctx.fillRect(16, 24, 32, 32);
            // ìš©ê´‘ë¡œ (ì°½ë¬¸ ëŒ€ì‹ )
            ctx.fillStyle = '#ff4500';
            ctx.fillRect(24, 32, 16, 12);
            ctx.fillStyle = '#ff8c00';
            ctx.fillRect(26, 34, 12, 8);
            // ë¬¸
            ctx.fillStyle = '#654321';
            ctx.fillRect(26, 46, 12, 10);
        }

        function drawMineEntrance(ctx) {
            // ì‚°
            ctx.fillStyle = '#696969';
            ctx.fillRect(0, 32, 64, 32);
            for (let i = 0; i < 32; i++) {
                ctx.fillRect(i, 32 - i/2, 1, 32 + i/2);
                ctx.fillRect(64 - i, 32 - i/2, 1, 32 + i/2);
            }
            // ë™êµ´ ì…êµ¬
            ctx.fillStyle = '#000';
            ctx.fillRect(20, 40, 24, 24);
            // ì•„ì¹˜
            ctx.fillStyle = '#8b4513';
            for (let i = 0; i < 12; i++) {
                ctx.fillRect(20 + i, 40 - i/2, 1, 2);
                ctx.fillRect(44 - i, 40 - i/2, 1, 2);
            }
            // ë ˆì¼
            ctx.fillStyle = '#8b8b8b';
            ctx.fillRect(26, 56, 2, 8);
            ctx.fillRect(36, 56, 2, 8);
        }

        function createBuildings() {
            const container = document.getElementById('buildings');
            buildings.forEach(b => {
                const div = document.createElement('div');
                div.className = 'sprite-item';
                div.innerHTML = `
                    <div class="label">${b.name}</div>
                    <canvas id="building-${b.name}" width="${b.size}" height="${b.size}"></canvas>
                    <div class="desc">${b.size}x${b.size}</div>
                `;
                container.appendChild(div);
                const canvas = document.getElementById(`building-${b.name}`);
                const ctx = canvas.getContext('2d');
                ctx.imageSmoothingEnabled = false;
                b.draw(ctx);
            });
        }

        // ============ NPC ============
        function drawShopkeeper(canvas) {
            const ctx = canvas.getContext('2d');
            ctx.imageSmoothingEnabled = false;
            // ë¨¸ë¦¬
            ctx.fillStyle = '#8b4513';
            ctx.fillRect(12, 4, 8, 4);
            // ì–¼êµ´
            ctx.fillStyle = '#ffdbac';
            ctx.fillRect(12, 8, 8, 6);
            // ì˜· (ì´ˆë¡ ì—ì´í”„ëŸ°)
            ctx.fillStyle = '#228b22';
            ctx.fillRect(10, 14, 12, 10);
            // íŒ”
            ctx.fillStyle = '#ffdbac';
            ctx.fillRect(8, 16, 2, 6);
            ctx.fillRect(22, 16, 2, 6);
            // ë‹¤ë¦¬
            ctx.fillStyle = '#2f4f4f';
            ctx.fillRect(12, 24, 3, 6);
            ctx.fillRect(17, 24, 3, 6);
        }

        function drawBlacksmith(canvas) {
            const ctx = canvas.getContext('2d');
            ctx.imageSmoothingEnabled = false;
            // ë¨¸ë¦¬ (ë¹¨ê°„ ë‘ê±´)
            ctx.fillStyle = '#dc143c';
            ctx.fillRect(12, 4, 8, 4);
            // ì–¼êµ´
            ctx.fillStyle = '#ffdbac';
            ctx.fillRect(12, 8, 8, 6);
            // ì˜· (ê°ˆìƒ‰ ì•ì¹˜ë§ˆ)
            ctx.fillStyle = '#8b4513';
            ctx.fillRect(10, 14, 12, 10);
            // íŒ”
            ctx.fillStyle = '#ffdbac';
            ctx.fillRect(8, 16, 2, 6);
            ctx.fillRect(22, 16, 2, 6);
            // ë§ì¹˜ (ì†ì—)
            ctx.fillStyle = '#696969';
            ctx.fillRect(22, 20, 4, 2);
            ctx.fillRect(24, 18, 2, 2);
            // ë‹¤ë¦¬
            ctx.fillStyle = '#654321';
            ctx.fillRect(12, 24, 3, 6);
            ctx.fillRect(17, 24, 3, 6);
        }

        function createNPCs() {
            const container = document.getElementById('npcs');
            const npcs = [
                { name: 'ìƒì  ì£¼ì¸', draw: drawShopkeeper },
                { name: 'ëŒ€ì¥ì¥ì´', draw: drawBlacksmith }
            ];

            npcs.forEach(npc => {
                const div = document.createElement('div');
                div.className = 'sprite-item';
                div.innerHTML = `
                    <div class="label">${npc.name}</div>
                    <canvas id="npc-${npc.name}" width="32" height="32"></canvas>
                `;
                container.appendChild(div);
                npc.draw(document.getElementById(`npc-${npc.name}`));
            });
        }

        // ============ ë°°ê²½ íƒ€ì¼ ============
        const backgrounds = [
            { name: 'ì§‘ ë°”ë‹¥', color: '#8b7355', pattern: 'wood' },
            { name: 'ë§ˆì„ ê¸¸', color: '#a0826d', pattern: 'stone' },
            { name: 'ì”ë””', color: '#228b22', pattern: 'grass' }
        ];

        function drawBackground(canvas, color, pattern) {
            const ctx = canvas.getContext('2d');
            ctx.imageSmoothingEnabled = false;
            ctx.fillStyle = color;
            ctx.fillRect(0, 0, 32, 32);

            if (pattern === 'wood') {
                ctx.fillStyle = '#6b5345';
                for (let i = 0; i < 32; i += 4) {
                    ctx.fillRect(0, i, 32, 2);
                }
            } else if (pattern === 'stone') {
                ctx.fillStyle = '#8b7365';
                for (let y = 0; y < 32; y += 16) {
                    for (let x = 0; x < 32; x += 16) {
                        ctx.strokeRect(x, y, 16, 16);
                    }
                }
            } else if (pattern === 'grass') {
                ctx.fillStyle = '#32cd32';
                for (let i = 0; i < 20; i++) {
                    ctx.fillRect(Math.random() * 30, Math.random() * 30, 2, 2);
                }
            }
        }

        function createBackgrounds() {
            const container = document.getElementById('backgrounds');
            backgrounds.forEach(bg => {
                const div = document.createElement('div');
                div.className = 'sprite-item';
                div.innerHTML = `
                    <div class="label">${bg.name}</div>
                    <canvas id="bg-${bg.name}" width="32" height="32"></canvas>
                `;
                container.appendChild(div);
                drawBackground(document.getElementById(`bg-${bg.name}`), bg.color, bg.pattern);
            });
        }

        // ============ ê´‘ì‚° ë°°ê²½ ============
        const mineBackgrounds = [
            { name: 'Lv1 ì´ˆì›', color: '#8b7355' },
            { name: 'Lv2 ì–¸ë•', color: '#7a6a5a' },
            { name: 'Lv3 ì‚°ì•…', color: '#6b5a4a' },
            { name: 'Lv4 ì‹¬ì¸µ', color: '#5a4a3a' },
            { name: 'Lv5 í™”ì‚°', color: '#4a2a2a' },
            { name: 'Lv6 ìˆ˜ì •', color: '#3a3a5a' },
            { name: 'Lv7 ìœ ì ', color: '#2a2a2a' }
        ];

        function drawMineBackground(canvas, color) {
            const ctx = canvas.getContext('2d');
            ctx.imageSmoothingEnabled = false;
            const grad = ctx.createLinearGradient(0, 0, 0, 64);
            grad.addColorStop(0, color);
            grad.addColorStop(1, '#000');
            ctx.fillStyle = grad;
            ctx.fillRect(0, 0, 64, 64);

            // ì•”ì„ í…ìŠ¤ì²˜
            ctx.fillStyle = 'rgba(0,0,0,0.3)';
            for (let i = 0; i < 30; i++) {
                ctx.fillRect(Math.random() * 64, Math.random() * 64, 2, 2);
            }
        }

        function createMineBackgrounds() {
            const container = document.getElementById('mine-backgrounds');
            mineBackgrounds.forEach(mb => {
                const div = document.createElement('div');
                div.className = 'sprite-item';
                div.innerHTML = `
                    <div class="label">${mb.name} ê´‘ì‚°</div>
                    <canvas id="mine-${mb.name}" width="64" height="64"></canvas>
                `;
                container.appendChild(div);
                drawMineBackground(document.getElementById(`mine-${mb.name}`), mb.color);
            });
        }

        // ============ UI ============
        function createUI() {
            const container = document.getElementById('ui');
            const items = [
                { name: 'HPë°” (ë¹ˆ)', id: 'hp-empty', draw: drawHPBarEmpty },
                { name: 'HPë°” (50%)', id: 'hp-half', draw: drawHPBarHalf },
                { name: 'HPë°” (ê°€ë“)', id: 'hp-full', draw: drawHPBarFull },
                { name: 'ë°ë¯¸ì§€ -120', id: 'dmg', draw: drawDamage },
                { name: 'ë²„íŠ¼', id: 'btn', draw: drawButton }
            ];

            items.forEach(item => {
                const div = document.createElement('div');
                div.className = 'sprite-item';
                div.innerHTML = `
                    <div class="label">${item.name}</div>
                    <canvas id="${item.id}" width="64" height="16"></canvas>
                `;
                container.appendChild(div);
                item.draw(document.getElementById(item.id));
            });
        }

        function drawHPBarEmpty(canvas) {
            const ctx = canvas.getContext('2d');
            ctx.imageSmoothingEnabled = false;
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 4, 64, 8);
            ctx.fillStyle = '#333';
            ctx.fillRect(2, 6, 60, 4);
        }

        function drawHPBarHalf(canvas) {
            const ctx = canvas.getContext('2d');
            ctx.imageSmoothingEnabled = false;
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 4, 64, 8);
            ctx.fillStyle = '#ff8800';
            ctx.fillRect(2, 6, 30, 4);
        }

        function drawHPBarFull(canvas) {
            const ctx = canvas.getContext('2d');
            ctx.imageSmoothingEnabled = false;
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 4, 64, 8);
            ctx.fillStyle = '#00ff00';
            ctx.fillRect(2, 6, 60, 4);
        }

        function drawDamage(canvas) {
            const ctx = canvas.getContext('2d');
            ctx.imageSmoothingEnabled = false;
            ctx.fillStyle = '#ff0000';
            ctx.font = 'bold 12px monospace';
            ctx.fillText('-120', 20, 12);
        }

        function drawButton(canvas) {
            const ctx = canvas.getContext('2d');
            ctx.imageSmoothingEnabled = false;
            ctx.fillStyle = '#ffd700';
            ctx.fillRect(8, 2, 48, 12);
            ctx.fillStyle = '#000';
            ctx.fillRect(10, 4, 44, 8);
            ctx.fillStyle = '#ffd700';
            ctx.font = '8px monospace';
            ctx.fillText('BUTTON', 16, 10);
        }

        // ============ ì´í™íŠ¸ ============
        function createEffects() {
            const container = document.getElementById('effects');
            const effects = [
                { name: 'íƒ€ê²© 1', id: 'hit1', draw: (ctx) => {
                    ctx.fillStyle = '#ffff00';
                    ctx.fillRect(14, 14, 4, 4);
                    ctx.fillRect(12, 16, 2, 2);
                    ctx.fillRect(18, 16, 2, 2);
                }},
                { name: 'íƒ€ê²© 2', id: 'hit2', draw: (ctx) => {
                    ctx.fillStyle = '#ffaa00';
                    ctx.fillRect(10, 10, 4, 4);
                    ctx.fillRect(18, 10, 4, 4);
                    ctx.fillRect(10, 18, 4, 4);
                    ctx.fillRect(18, 18, 4, 4);
                }},
                { name: 'í¬ë¦¬í‹°ì»¬!', id: 'crit', draw: (ctx) => {
                    ctx.fillStyle = '#ff00ff';
                    ctx.fillRect(15, 8, 2, 16);
                    ctx.fillRect(8, 15, 16, 2);
                    ctx.fillRect(11, 11, 2, 2);
                    ctx.fillRect(19, 11, 2, 2);
                    ctx.fillRect(11, 19, 2, 2);
                    ctx.fillRect(19, 19, 2, 2);
                }}
            ];

            effects.forEach(eff => {
                const div = document.createElement('div');
                div.className = 'sprite-item';
                div.innerHTML = `
                    <div class="label">${eff.name}</div>
                    <canvas id="${eff.id}" width="32" height="32"></canvas>
                `;
                container.appendChild(div);
                const ctx = document.getElementById(eff.id).getContext('2d');
                ctx.imageSmoothingEnabled = false;
                eff.draw(ctx);
            });
        }

        // ============ ë‹¤ìš´ë¡œë“œ ============
        function downloadAllSprites() {
            const sheet = document.createElement('canvas');
            sheet.width = 1024;
            sheet.height = 1024;
            const ctx = sheet.getContext('2d');
            ctx.imageSmoothingEnabled = false;
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, 1024, 1024);

            let x = 10, y = 10;
            const allCanvases = document.querySelectorAll('canvas');

            allCanvases.forEach(canvas => {
                if (x + canvas.width > 1014) {
                    x = 10;
                    y += 80;
                }
                ctx.drawImage(canvas, x, y);
                x += canvas.width + 10;
            });

            const link = document.createElement('a');
            link.download = 'mine-digger-all-sprites.png';
            link.href = sheet.toDataURL();
            link.click();

            alert('ëª¨ë“  ìŠ¤í”„ë¼ì´íŠ¸ê°€ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        // ============ ì´ˆê¸°í™” ============
        window.onload = () => {
            drawCharacterIdle(document.getElementById('char-idle'));
            drawCharacterMining(document.getElementById('char-mining'));
            createMinerals();
            createPickaxes();
            createBuildings();
            createNPCs();
            createBackgrounds();
            createMineBackgrounds();
            createUI();
            createEffects();
        };
    </script>
</body>
</html>

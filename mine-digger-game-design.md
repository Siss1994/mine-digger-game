# 광물캐기 (Mine Digger) - 게임 완성 문서 v3

## 📋 게임 개요

### 컨셉
- **장르**: RPG + 채굴 시뮬레이션 + 성장형
- **타겟**: 캐주얼 게이머, RPG 성장 시스템 선호층
- **플랫폼**: 웹 브라우저 (HTML5 Canvas)
- **스타일**: 레트로 픽셀 아트 (55x55px 타일, 1000x1000 캔버스)

### 핵심 게임플레이
**집 → 마을 → 광산 → 채굴 → 상점 판매 → 업그레이드 → 반복**

- 집에서 시작 (휴식, TV로 날씨 확인)
- 3개 마을을 탐험 (9개 광산 분산 배치)
- 광산에서 광물 채굴 (HP 시스템)
- 채굴한 광물을 상점에서 판매 (개별/일괄/전체 판매)
- 골드로 더 좋은 곡괭이 구매
- 스탯 업그레이드 및 캐릭터 커스터마이징

---

## 🎮 핵심 시스템 (구현 완료)

### 1. 채굴 시스템 ✅

#### 광물 데이터 (21종)
```javascript
Tier 1 (3종): 석탄, 점토, 자갈
Tier 2 (3종): 철광석, 주석, 황철석 ☀️
Tier 3 (3종): 구리, 아연, 니켈 ❄️
Tier 4 (3종): 은 🌙, 티타늄, 백금
Tier 5 (3종): 금 ☀️, 자수정, 비취 🌧️
Tier 6 (3종): 다이아, 에메랄드 🌧️, 루비 ☀️
Tier 7 (3종): 운석 🌙, 미스릴 ❄️, 아다만
```

#### 곡괭이 시스템 (8종)
```javascript
1. 나무 (ATK:3, 무한내구)
2. 돌 (ATK:12, 200)
3. 철 (ATK:30, 400)
4. 강철 (ATK:60, 600)
5. 금 (ATK:110, 500)
6. 다이아 (ATK:200, 1000)
7. 미스릴 (ATK:400, 2000)
8. 전설 (ATK:800, 무한)
```

#### 채굴 메커니즘
- HP 기반 채굴 시스템
- 공격력 vs 방어력 비교
- 곡괭이 내구도 시스템 (무한 내구 제외)
- 에너지 소모 (채굴 1회당 1 에너지)
- **곡괭이질 애니메이션**: 회전 기반 스윙 (0~10 프레임)
  - 준비 자세 (-50°) → 내리찍기 (80°) → 준비 자세
  - Ease-in/out 타이밍 적용

### 2. 날씨 시스템 ✅

#### 날씨 타입 (4종)
```
☀️ 맑음 - 황철석, 금, 루비 1.5배 버프
🌧️ 비 - 비취, 에메랄드 1.5배 버프
❄️ 눈 - 니켈, 미스릴 1.5배 버프
🌙 달밤 - 은, 운석 1.5배 버프
```

- 3분마다 자동 변경
- 집 TV에서 확인 가능
- HUD에 현재 날씨 표시
- Tier 2 이상 광물만 버프 적용

### 3. 마을 시스템 ✅

#### 3개 마을 구조
```
마을 1:
- 🏠 집 (휴식, TV)
- 🏪 상점
- ⛏️ 광산 1~2

마을 2:
- 🌀 포탈 (마을 1 ↔ 마을 3)
- ⛏️ 광산 3~5

마을 3:
- 🌀 포탈 (마을 2)
- ⛏️ 광산 6~9
```

#### 광산 분포 (9개)
```
1. 초원 (Tier 1)
2. 언덕 (Tier 1~2)
3. 산악 (Tier 2~3)
4. 심층 (Tier 3~4)
5. 화산 (Tier 4~5)
6. 수정 (Tier 5~6)
7. 유적 (Tier 6~7)
8. 심연 (Tier 6~7)
9. 천공 (Tier 6~7)
```

### 4. 상점 시스템 ✅

#### 판매 기능
- **개별 판매**: 광물 1개씩 판매
- **일괄 판매**: 같은 종류 광물 전체 판매
- **전체 판매**: 인벤토리 모든 광물 판매 (빨간 버튼)

#### 구매 기능
- 곡괭이 구매 (8종)
- 골드 부족 시 구매 불가

### 5. 스탯 시스템 ✅

#### 스탯 포인트
- 레벨업 시 1포인트 획득
- 6가지 스탯 업그레이드 가능:
  1. 최대 에너지 (+10)
  2. 기본 공격력 (+2)
  3. 이동 속도 (+0.1x)
  4. 채굴 속도 (+10%)
  5. 골드 배율 (+0.1x)
  6. 경험치 배율 (+0.1x)

### 6. 캐릭터 커스터마이징 ✅

#### 옷장 시스템 (30종)
**헤어스타일 (10종):**
- 기본, 금발, 흑발, 백발, 갈색, 빨강, 파랑, 초록, 보라, 분홍

**상의 (10종):**
- 작업복, 기사갑옷, 광부복, 모험복, 마법사, 암살자, 성직자, 해적, 왕족, 상인

**하의 (10종):**
- 작업바지, 갑옷바지, 광부바지, 모험바지, 마법바지, 암살바지, 성직바지, 해적바지, 왕족바지, 상인바지

#### 캐릭터 방향 스프라이트
- 4방향 스프라이트 (아래, 위, 왼쪽, 오른쪽)
- 각 방향별 고유한 디자인
- 걷기 애니메이션 (다리 움직임)
- 곡괭이 디자인: 십자형 헤드 + 나무 손잡이

### 7. 씬 전환 시스템 ✅

#### 위치 자동 배치
- **집 → 마을**: 집 앞 (3, 5)
- **마을 → 집**: 집 내부 문 앞 (9, 16)
- **마을 → 광산**: 광산 출구 근처 (1.5, 15)
- **광산 → 마을**: 광산 입구 앞 (광산 좌표 + 오프셋)
- **마을 간 이동**: 포탈 위치

#### 메뉴 시스템
- ESC: 메뉴 열기/닫기
- Depth 형식 (메뉴 → 서브메뉴, ESC로 전체 닫기)
- 메뉴 옵션: 집, 마을, 스탯, 상점, 인벤토리, 옷장

### 8. UI/UX ✅

#### HUD (화면 상단)
```
Lv.X | 💰 골드 | ⚡ 에너지 | 날씨 | ⛏️ 곡괭이(내구도) | 📦 인벤
```

#### 조작법
- WASD: 이동
- SPACE: 행동 (채굴, 입장, 휴식, TV 등)
- ESC: 메뉴
- I: 인벤토리
- S: 스탯

---

## 🎨 기술 구현

### Canvas 설정
```javascript
캔버스: 1000x1000px
타일 크기: 55px
그리드: 18x18
렌더링: pixelated, crisp-edges
```

### 애니메이션 시스템

#### 곡괭이질 애니메이션
```javascript
// 회전 기반 스윙 애니메이션
- Pivot: 손잡이 끝 (손 위치)
- 회전 각도: -50° (준비) → 80° (내리찍기)
- 타이밍: Ease-in (0~60%), Ease-out (60~100%)
- 프레임: 10단계 (mf/3)
- Canvas rotate() 사용
```

#### 캐릭터 그리기
```javascript
drawDown(), drawUp(), drawLeft(), drawRight()
- 각 방향별 고유 얼굴/머리카락 디자인
- Outfit 시스템 적용 (hair, shirt, pants)
- 걷기 애니메이션 (leg offset)
```

### 데이터 구조

#### 게임 상태
```javascript
{
  lv: 레벨,
  xp: 경험치,
  sp: 스탯 포인트,
  st: { 스탯 객체 },
  g: 골드,
  e: 에너지,
  inv: [인벤토리],
  pk: 곡괭이,
  sc: 씬,
  vl: 마을 레벨,
  ml: 광산 레벨,
  outfit: { hair, shirt, pants }
}
```

#### LocalStorage 저장
- 자동 저장 (상점 거래, 채굴 완료 등)
- 메뉴에서 저장하고 나가기

---

## 🎯 완성된 기능 목록

### Phase 1: 스프라이트 ✅
- [x] 캐릭터 4방향 스프라이트
- [x] 광물 21종
- [x] 곡괭이 8종
- [x] 곡괭이 디자인 (십자형)

### Phase 2: 디자인 ✅
- [x] 집 화면 (TV, 침대, 문)
- [x] 마을 화면 (3개 마을, 건물 배치)
- [x] 광산 화면 (채굴 UI)
- [x] 상점 UI (판매/구매 탭)
- [x] 옷장 UI (30종 의상)

### Phase 3: 게임 로직 ✅
- [x] 씬 전환 시스템
- [x] 채굴 시스템 (HP, 공격력, 내구도)
- [x] 날씨 시스템 (4종, 버프)
- [x] 상점 시스템 (개별/일괄/전체 판매)
- [x] 인벤토리 시스템 (30칸)
- [x] 스탯 시스템 (6종)
- [x] 레벨/경험치 시스템
- [x] 에너지 시스템
- [x] 곡괭이 내구도 시스템
- [x] 캐릭터 커스터마이징 (옷장)
- [x] LocalStorage 저장/로드

### Phase 4: 애니메이션 ✅
- [x] 곡괭이질 회전 애니메이션
- [x] 걷기 애니메이션
- [x] 채굴 UI (HP바, 데미지)
- [x] 씬 전환 위치 자동 배치

---

## 📁 프로젝트 파일 구조

```
mine-digger-game/
├── mine-digger-game.html          # 메인 게임 파일 (51KB)
├── mine-digger-all-sprites.html   # 스프라이트 원본 (30KB)
├── mine-digger-game-design.md     # 이 문서
└── README.md                       # 프로젝트 설명
```

---

## 🎮 게임 플레이 가이드

### 시작하기
1. `mine-digger-game.html` 파일을 브라우저에서 열기
2. 집에서 시작, 침대에서 휴식 가능
3. TV로 날씨 확인
4. 문으로 마을 이동

### 성장 루트
1. **초반**: 나무 곡괭이로 광산 1~2 채굴
2. **중반**: 골드 모아서 철/강철 곡괭이 구매, 광산 3~5 도전
3. **후반**: 금/다이아 곡괭이로 광산 6~9 진입
4. **엔드게임**: 전설 곡괭이(100만G) 획득

### 팁
- 날씨에 맞는 광물 채굴 시 1.5배 골드
- 스탯은 골드/경험치 배율 우선 추천
- 인벤토리 30칸 차면 일괄 판매 활용
- 곡괭이 내구도 관리 중요 (무한 내구 제외)

---

## 🔧 기술 스택

- **언어**: Vanilla JavaScript (ES6+)
- **렌더링**: HTML5 Canvas API
- **스타일**: CSS3 (픽셀 아트 최적화)
- **저장**: LocalStorage
- **애니메이션**: requestAnimationFrame
- **수학**: Canvas 2D Transform (rotate, translate)

---

## 📊 게임 데이터

### 광물 통계
- 총 21종
- Tier 1~7 분포
- 날씨 버프 광물: 10종

### 곡괭이 통계
- 총 8종
- 가격 범위: 0G ~ 100만G
- 공격력 범위: 3 ~ 800

### 의상 통계
- 총 30종 (헤어 10 + 상의 10 + 하의 10)
- 조합 가능: 1,000가지

---

## 🎯 향후 개선 가능 사항

### Could Add (선택적)
- [ ] BGM/효과음
- [ ] 업적 시스템
- [ ] 도감 시스템
- [ ] 특수 이벤트 광물
- [ ] 대장간 (곡괭이 강화/수리)
- [ ] 모바일 터치 최적화

### Won't Add (제외)
- 멀티플레이어
- 퀘스트 시스템
- 복잡한 스토리

---

## 📝 개발 로그

**2025-10-20**
- ✅ 기본 게임 로직 완성
- ✅ 3개 마을 시스템 구현
- ✅ 날씨 시스템 추가
- ✅ 옷장 시스템 (30종 의상)
- ✅ 곡괭이질 회전 애니메이션
- ✅ 곡괭이 디자인 개선 (십자형)
- ✅ 상점 판매 시스템 (개별/일괄/전체)
- ✅ 씬 전환 위치 자동 배치
- ✅ 해상도 최적화 (1000x1000)
- ✅ 백업 파일 정리

---

게임 완성! 🎮⛏️✨
